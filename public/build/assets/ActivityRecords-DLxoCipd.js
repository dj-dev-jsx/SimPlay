import{r as i,j as e,H as D,L as S,c as _}from"./app-CUU1iLzl.js";import{T as A}from"./TeacherLayout-DdIjbJZ9.js";import{D as x,a as h,b as m,c as p,f,d as u}from"./dialog-UDe7vynf.js";import{B as n}from"./button-c-kbW1Cp.js";import{c as g}from"./user-DyYaZDJY.js";import"./log-out-BDzL6a4i.js";const O=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],I=g("circle-check-big",O);const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],M=g("circle-x",L);function P({activity:l,classroom:o,students:j}){const[y,c]=i.useState(!1),[b,d]=i.useState(""),[N,r]=i.useState(!1),[a,v]=i.useState(null),k=s=>{v(s),r(!0)},C=async()=>{if(!a)return;const s=a.id;a.student_activities?.[0]?.status;try{const t=await _.post(route("teacher.activity.records.toggle",[l.id,s]));d(t.data.message||"Status updated successfully!"),c(!0),r(!1),setTimeout(()=>window.location.reload(),1e3)}catch(t){console.error(t),d(t.response?.data?.message||"Failed to update status."),c(!0),r(!1)}};return e.jsxs(A,{children:[e.jsx(D,{title:"Activity Records"}),e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"relative mb-12",children:[e.jsx(S,{href:route("teacher.list_of_activities",o.id),className:"absolute -top-10 left-0 bg-white border border-[#3f5f1f] text-[#3f5f1f] font-semibold px-4 py-2 rounded-full shadow hover:bg-[#eef6ea] transition",children:"← Back to Activities"}),e.jsxs("h1",{className:"text-2xl font-bold text-green-700 mt-8",children:[l.title," – Records"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Class: ",o.name]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-green-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Student"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Action"})]})}),e.jsx("tbody",{children:j.map(s=>{const t=s.student_activities?.[0]?.status==="completed";return e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"px-4 py-3",children:[s.lastname,", ",s.firstname," ",s.middlename]}),e.jsx("td",{className:"px-4 py-3",children:t?e.jsx("span",{className:"text-green-600 font-semibold",children:"✔ Completed"}):e.jsx("span",{className:"text-gray-500",children:"In Progress"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:()=>k(s),className:`inline-flex items-center gap-2 px-4 py-2 rounded-full font-semibold text-white ${t?"bg-gray-500 hover:bg-gray-600":"bg-green-600 hover:bg-green-700"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4"}),"Mark As In Progress"]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4"}),"Mark Done"]})})})]},s.id)})})]})}),e.jsx(x,{open:N,onOpenChange:r,children:e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(p,{children:"Confirm Action"})}),e.jsxs(f,{children:["Are you sure you want to"," ",a?.student_activities?.[0]?.status==="completed"?"mark this activity as In Progress":"mark this activity as Done"," ","for ",a?.firstname," ",a?.lastname,"?"]}),e.jsxs(u,{className:"space-x-2",children:[e.jsx(n,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(n,{onClick:C,children:"Yes, Confirm"})]})]})}),e.jsx(x,{open:y,onOpenChange:c,children:e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(p,{children:"Notification"})}),e.jsx(f,{children:b}),e.jsx(u,{children:e.jsx(n,{onClick:()=>c(!1),children:"OK"})})]})})]})]})}export{P as default};
